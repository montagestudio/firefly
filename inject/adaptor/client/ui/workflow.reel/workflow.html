<!DOCTYPE html>
<html>
<head>
    <title></title>
    <link rel="stylesheet" type="text/css" href="workflow.css">
    <script type="text/montage-serialization">
    {
        "owner": {
            "properties": {
                "element": {"#": "owner"}
            }
        },

        "currentBranchName": {
            "prototype": "montage/ui/text.reel",
            "properties": {
                "element": {"#": "currentBranchName"}
            },
            "bindings": {
                "value": {"<-": "@owner.projectDocument.currentBranch.name"}
            }
        },

        "shadowCount": {
            "prototype": "montage/ui/text.reel",
            "properties": {
                "element": {"#": "shadowCount"}
            },
            "bindings": {
                "value": {"<-": "@owner.projectDocument.currentBranch ? @owner.projectDocument.aheadCount : ''"}
            }
        },

        "panelSubstitution": {
            "prototype": "montage/ui/substitution.reel",
            "properties": {
                "element": {"#": "panelSubstitution"},
                "switchValue": "pristine"
            },
            "bindings": {
                "switchValue": {"<-": "@owner.panelKey"}
            }
        },

        "dirtyDocumentCount": {
            "prototype": "montage/ui/text.reel",
            "properties": {
                "element": {"#": "dirtyDocumentCount"}
            },
            "bindings": {
                "value": {"<-": "@owner.projectDocument.dirtyDocuments.length"}
            }
        }
    }
    </script>
</head>
<body>
    <div data-montage-id="owner" class="Workflow">
        <h2 data-montage-id="currentBranchName" class="Workflow-branchName Workflow-segment"></h2>
        <div class="Workflow-shadowDelta Workflow-segment">
            <span data-montage-id="shadowCount"></span>
        </div>

        <div data-montage-id="panelSubstitution" class="Workflow-segment">
            <section data-arg="pristine" data-montage-id="pristineWorkspacePanel"></section>
            <section data-arg="ahead" data-montage-id="aheadWorkspacePanel" class="Workflow-panel">
                <p class="Workflow-status">Ready to publish</p>
            </section>
            <section data-arg="behind" data-montage-id="behindWorkspacePanel" class="Workflow-panel">
                <p class="Workflow-status">Behind</p>
            </section>
            <section data-arg="diverged" data-montage-id="divergedWorkspacePanel" class="Workflow-panel">
                <p class="Workflow-status">Diverged</p>
            </section>
            <section data-arg="dirty" data-montage-id="dirtyWorkspacePanel" class="Workflow-panel">
                <p class="Workflow-status">Unsaved changes in <span data-montage-id="dirtyDocumentCount"></span> documents</p>
            </section>
        </div>
    </div>
</body>
</html>
